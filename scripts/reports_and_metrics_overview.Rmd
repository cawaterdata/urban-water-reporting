---
title: "Report Combinations and Metrics Reported"
author: "Erin Cain"
date: "2/1/2022"
output: rmarkdown::github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Reports 

There are 5 different reports that must be compared with each other. There are 10 total comparisons that must be done for each metric. Each comparison is shown below: 


|  | UWMP| Conservation| eAR| Water Loss| Supply & Demand* | Water Use Objective* | 
| -------------- | -------- | ------- | ------------ | ----------------| ---------- |---- | 
| **UWMP** | - | 1 | 2 | 3 | 4 | 5 |
| **Conservation** | - | - | 6 | 7| 8 |  9 | 
| **eAR** | - | - |- | 10 | 11 | 12 |
| **Water Loss** | - | - | - | - | 13 | 14 | 
| **Supply & Demand*** | - | - | - | - | - | 15 |
| **Water Use Objective*** | - | - | - | - | - | - |

*No data reported yet for Supply & Demand assessment or Water Use Objective. 

## Metrics

### Water Supply Metrics Reported 

```{r}
# Conservation Report Metrics
readr::read_rds("../data/conservation_supply_fields.rds")

# Some of UWMP Metrics (many more tables we could pull from) - some reports give metrics for each month but others just have annual values.* 
readr::read_rds("../data/UWMP_supply_fields.rds")

# Water Loss Report Metrics
readr::read_rds("../data/WLR_supply_fields.rds")

# EAR 
readr::read_rds("../data/EAR_supply_fields.rds")

```

#### Shared Supply Metrics 

Total Water Supplied appears to be reported under different names across the 4 reports: 

* **Conservation Report:** `"REPORTED FINAL Total Potable Water Production"`(units: see `"Water Production Units"`) Monthly data sum to find annual value. 
* **UWMP:** `"VOLUME_OF_WATER_SUPPLIED_AF"` (units: Acre Feet) Annually but looks like some agencies also provided monthly in report  
* **WLR:** `"WS_WATER_SUPPLIED_VOL_AF"` (units: Acre Feet) Annually only 
* **EAR** `"WPAnnualTotal"` (units: see `"WPUnitsofMeasure"`) Monthly and annually 


### Water Demand Metrics Reported 

```{r}
# Conservation Report Metrics
readr::read_rds("../data/conservation_demand_fields.rds")

# Some of UWMP Metrics (many more tables we could pull from) - some reports give metrics for each month but others just have annual values.* 
readr::read_rds("../data/UWMP_demand_fields.rds")

# Water Loss Report Metrics
readr::read_rds("../data/WLR_demand_fields.rds")

# EAR 
readr::read_rds("../data/EAR_demand_fields.rds")

```

#### Shared Demand Metrics

Total Water Demand is reported in 3? of the 4 reports and can be calculated from other demand measures: 
* **Conservation Report:** Need to sum up to get total 
* **UWMP:** `"WATER_DEMAND_VOLUME_2020_AF"` (units: Acre Feet)
* **WLR:** `"AC_AUTH_CONSUMPTION_VOL_AF"?` (units: Acre Feet)
* **EAR:** `"WDAnnualTotal"` 

### Other Fields 
```{r}
# Conservation Report Metrics
readr::read_rds("../data/conservation_calculated_fields.rds")
readr::read_rds("../data/conservation_background_fields.rds")

# Water Loss Report Metrics
readr::read_rds("../data/WLR_other_fields.rds")
```